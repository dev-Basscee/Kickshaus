<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - Kickshaus</title>
  
  <link rel="stylesheet" href="public/css/style.css">
  <link rel="stylesheet" href="public/css/mobile-dark-mode.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Poppins', sans-serif; background: var(--bg-primary); color: var(--text-primary); }
    .dashboard-container { display: flex; min-height: 100vh; }
    
    /* Sidebar */
    .sidebar { width: 280px; background: var(--bg-card); border-right: 1px solid var(--border-color); padding: 24px 0; position: fixed; height: 100vh; overflow-y: auto; transition: all 0.3s ease; z-index: 100; }
    .sidebar-header { padding: 0 24px 24px; border-bottom: 1px solid var(--border-color); }
    .sidebar-logo { display: flex; align-items: center; gap: 12px; font-family: 'Playfair Display', serif; font-size: 1.5rem; font-weight: 900; color: var(--primary); }
    .sidebar-logo img { width: 40px; height: 40px; }
    .sidebar-nav { padding: 24px 0; }
    .nav-item { display: flex; align-items: center; gap: 12px; padding: 14px 24px; color: var(--text-secondary); text-decoration: none; transition: all 0.3s ease; cursor: pointer; border-left: 3px solid transparent; }
    .nav-item:hover { background: var(--bg-primary); color: var(--primary); border-left-color: var(--primary); }
    .nav-item.active { background: rgba(0, 168, 232, 0.1); color: var(--primary); border-left-color: var(--primary); font-weight: 600; }
    .nav-item i { width: 20px; font-size: 1.1rem; }
    .sidebar-footer { padding: 24px; border-top: 1px solid var(--border-color); margin-top: auto; }
    .logout-btn { display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 12px; background: var(--accent); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
    .logout-btn:hover { background: #ff5252; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3); }
    
    /* Main Content */
    .main-content { margin-left: 280px; flex: 1; padding: 32px; width: calc(100% - 280px); }
    .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px; flex-wrap: wrap; gap: 16px; }
    .page-title { font-family: 'Playfair Display', serif; font-size: 2.5rem; font-weight: 900; color: var(--text-primary); }
    .top-actions { display: flex; align-items: center; gap: 16px; }
    .search-box { display: flex; align-items: center; gap: 8px; background: var(--bg-card); padding: 10px 16px; border-radius: 8px; border: 1px solid var(--border-color); }
    .search-box input { border: none; background: none; outline: none; color: var(--text-primary); width: 200px; }
    .search-box i { color: var(--text-muted); }
    .notification-btn { position: relative; width: 44px; height: 44px; border-radius: 50%; background: var(--bg-card); border: 1px solid var(--border-color); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; }
    .notification-btn:hover { background: var(--primary); color: white; border-color: var(--primary); }
    .notification-badge { position: absolute; top: -4px; right: -4px; background: var(--accent); color: white; width: 20px; height: 20px; border-radius: 50%; font-size: 0.7rem; display: flex; align-items: center; justify-content: center; font-weight: 700; }
    .admin-profile { display: flex; align-items: center; gap: 12px; padding: 8px 16px; background: var(--bg-card); border-radius: 8px; border: 1px solid var(--border-color); cursor: pointer; transition: all 0.3s ease; }
    .admin-profile:hover { border-color: var(--primary); }
    .admin-avatar { width: 36px; height: 36px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 700; }
    .admin-info { display: flex; flex-direction: column; }
    .admin-name { font-size: 0.9rem; font-weight: 600; color: var(--text-primary); }
    .admin-role { font-size: 0.75rem; color: var(--text-muted); }
    
    /* Stats & Cards */
    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 24px; margin-bottom: 32px; }
    .stat-card { background: var(--bg-card); padding: 24px; border-radius: 16px; border: 1px solid var(--border-color); transition: all 0.3s ease; }
    .stat-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); }
    .stat-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px; }
    .stat-icon { width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
    .stat-icon.blue { background: rgba(0, 168, 232, 0.1); color: var(--primary); }
    .stat-icon.green { background: rgba(76, 175, 80, 0.1); color: #4CAF50; }
    .stat-icon.orange { background: rgba(255, 152, 0, 0.1); color: #FF9800; }
    .stat-icon.purple { background: rgba(156, 39, 176, 0.1); color: #9C27B0; }
    .stat-trend { display: flex; align-items: center; gap: 4px; padding: 4px 8px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; }
    .stat-trend.up { background: rgba(76, 175, 80, 0.1); color: #4CAF50; }
    .stat-trend.down { background: rgba(244, 67, 54, 0.1); color: #F44336; }
    .stat-value { font-size: 2rem; font-weight: 700; color: var(--text-primary); margin-bottom: 4px; }
    .stat-label { font-size: 0.9rem; color: var(--text-muted); }
    
    .card { background: var(--bg-card); border-radius: 16px; border: 1px solid var(--border-color); padding: 24px; margin-bottom: 24px; }
    .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .card-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); }
    .card-action { color: var(--primary); text-decoration: none; font-size: 0.9rem; font-weight: 600; transition: all 0.3s ease; cursor: pointer; }
    .card-action:hover { text-decoration: underline; }
    
    /* Tables */
    .table-container { overflow-x: auto; }
    table { width: 100%; border-collapse: collapse; }
    th { text-align: left; padding: 12px; background: var(--bg-primary); color: var(--text-primary); font-weight: 600; font-size: 0.9rem; border-bottom: 2px solid var(--border-color); }
    td { padding: 16px 12px; border-bottom: 1px solid var(--border-color); color: var(--text-secondary); }
    tr:hover { background: var(--bg-primary); }
    .status-badge { display: inline-block; padding: 4px 12px; border-radius: 12px; font-size: 0.8rem; font-weight: 600; }
    .status-badge.pending { background: rgba(255, 152, 0, 0.1); color: #FF9800; }
    .status-badge.completed { background: rgba(76, 175, 80, 0.1); color: #4CAF50; }
    .status-badge.cancelled { background: rgba(244, 67, 54, 0.1); color: #F44336; }
    .status-badge.processing { background: rgba(0, 168, 232, 0.1); color: var(--primary); }
    
    /* Buttons */
    .btn { padding: 10px 20px; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 8px; font-family: 'Poppins', sans-serif; }
    .btn-primary { background: var(--primary); color: white; }
    .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 168, 232, 0.3); }
    .btn-secondary { background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border-color); }
    .btn-secondary:hover { background: var(--bg-card); border-color: var(--primary); }
    
    /* Mobile */
    .sidebar-toggle { display: none; position: fixed; top: 20px; left: 20px; z-index: 1001; background: var(--bg-card); border: none; padding: 12px; border-radius: 8px; box-shadow: var(--shadow-md); cursor: pointer; color: var(--text-primary); font-size: 1.3rem; }
    
    @media (max-width: 768px) {
      .sidebar-toggle { display: block; }
      .sidebar { left: -280px; }
      .sidebar.active { left: 0; box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3); }
      .main-content { margin-left: 0; width: 100%; padding: 80px 20px 20px; }
      .page-title { font-size: 2rem; }
      .stats-grid { grid-template-columns: 1fr; }
      .search-box, .admin-info { display: none; }
    }
    
    /* Sections */
    .dashboard-section { display: none; }
    .dashboard-section.active { display: block; animation: fadeInUp 0.5s ease; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

    /* Tabs */
    .tabs { display: flex; gap: 8px; border-bottom: 2px solid var(--border-color); margin-bottom: 20px; }
    .tab-link { padding: 10px 20px; cursor: pointer; border: none; background: none; color: var(--text-secondary); font-weight: 600; border-bottom: 3px solid transparent; transition: all 0.3s ease; }
    .tab-link:hover { color: var(--primary); }
    .tab-link.active { color: var(--primary); border-bottom-color: var(--primary); }
    .tab-content { display: none; animation: fadeInUp 0.4s; }
  </style>
</head>
<body>

  <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme"><i class="fas fa-moon"></i></button>
  <button class="sidebar-toggle" id="sidebarToggle"><i class="fas fa-bars"></i></button>

  <div class="dashboard-container">
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%2300A8E8' d='M50 10 L80 30 L80 70 L50 90 L20 70 L20 30 Z'/%3E%3Cpath fill='white' d='M35 40 Q50 35 65 40 L65 60 Q50 65 35 60 Z'/%3E%3C/svg%3E" alt="Logo">
          <span>Kickshaus</span>
        </div>
      </div>
      <nav class="sidebar-nav">
        <a class="nav-item active" data-section="overview"><i class="fas fa-chart-line"></i><span>Overview</span></a>
        <a class="nav-item" data-section="orders"><i class="fas fa-shopping-bag"></i><span>Orders</span></a>
        <a class="nav-item" data-section="products"><i class="fas fa-box"></i><span>Products</span></a>
        <a class="nav-item" data-section="customers"><i class="fas fa-users"></i><span>Customers</span></a>
        <a class="nav-item" data-section="analytics"><i class="fas fa-chart-pie"></i><span>Analytics</span></a>
        <a class="nav-item" data-section="inventory"><i class="fas fa-warehouse"></i><span>Inventory</span></a>
        <a class="nav-item" data-section="reviews"><i class="fas fa-star"></i><span>Reviews</span></a>
        <a class="nav-item" data-section="merchants">
  <i class="fas fa-store"></i><span>Merchants</span>
</a>
        <a class="nav-item" data-section="settings"><i class="fas fa-cog"></i><span>Settings</span></a>
      </nav>
      <div class="sidebar-footer">
        <button class="logout-btn" id="logoutBtn"><i class="fas fa-sign-out-alt"></i><span>Logout</span></button>
      </div>
    </aside>

    <main class="main-content">
      <div class="top-bar">
        <h1 class="page-title" id="pageTitle">Overview</h1>
        <div class="top-actions">
          <button class="btn btn-secondary" id="refreshBtn"><i class="fas fa-sync-alt"></i><span>Refresh</span></button>
          <div class="search-box"><i class="fas fa-search"></i><input type="text" placeholder="Search..."></div>
          <button id="notificationBtn" class="notification-btn"><i class="fas fa-bell"></i><span class="notification-badge">3</span></button>
          <div class="admin-profile">
            <div class="admin-avatar"><i class="fas fa-shield-alt"></i></div>
            <div class="admin-info"><div class="admin-name">Admin</div><div class="admin-role">Super Admin</div></div>
          </div>
        </div>
      </div>

      <!-- OVERVIEW SECTION -->
      <div class="dashboard-section active" id="overview-section">
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-header">
              <div class="stat-icon blue"><i class="fas fa-dollar-sign"></i></div>
              <div class="stat-trend up"><i class="fas fa-arrow-up"></i>12.5%</div>
            </div>
            <div class="stat-value" id="totalRevenue">₦0</div>
            <div class="stat-label">Total Revenue</div>
          </div>
          <div class="stat-card">
            <div class="stat-header">
              <div class="stat-icon green"><i class="fas fa-shopping-cart"></i></div>
              <div class="stat-trend up"><i class="fas fa-arrow-up"></i>8.3%</div>
            </div>
            <div class="stat-value" id="totalOrders">0</div>
            <div class="stat-label">Total Orders</div>
          </div>
          <div class="stat-card">
            <div class="stat-header">
              <div class="stat-icon orange"><i class="fas fa-users"></i></div>
              <div class="stat-trend up"><i class="fas fa-arrow-up"></i>15.2%</div>
            </div>
            <div class="stat-value" id="totalCustomers">0</div>
            <div class="stat-label">Total Customers</div>
          </div>
          <div class="stat-card">
            <div class="stat-header">
              <div class="stat-icon purple"><i class="fas fa-store"></i></div>
              <div class="stat-trend down"><i class="fas fa-arrow-down"></i>3.1%</div>
            </div>
            <div class="stat-value" id="totalMerchants">0</div>
            <div class="stat-label">Merchants</div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Recent Orders</h2>
            <a class="card-action" onclick="showSection('orders')">View All</a>
          </div>
          <div class="table-container">
            <table>
              <thead><tr><th>Order ID</th><th>Customer</th><th>Amount</th><th>Status</th></tr></thead>
              <tbody id="recentOrdersTable">
                <!-- Data will be populated by API -->
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- ORDERS SECTION -->
      <div class="dashboard-section" id="orders-section">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Order Management</h2>
            <div class="tabs">
              <button class="tab-link active" onclick="openOrderTab(event, 'allOrders')">All Orders</button>
              <button class="tab-link" onclick="openOrderTab(event, 'deliveries')">Deliveries</button>
            </div>
          </div>
          
          <div id="allOrders" class="tab-content" style="display: block;">
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Order ID</th>
                    <th>Customer</th>
                    <th>Items</th>
                    <th>Total Amount</th>
                    <th>Payment Status</th>
                    <th>Order Status</th>
                    <th>Date</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="allOrdersTable">
                  <!-- Data will be populated by API -->
                </tbody>
              </table>
            </div>
          </div>

          <div id="deliveries" class="tab-content" style="display: none;">
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Order ID</th>
                    <th>Customer</th>
                    <th>Status</th>
                    <th>Last Updated</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="deliveryOrdersTable">
                  <!-- Data will be populated by API -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Order Details Modal -->
      <div id="orderModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 10002; align-items: center; justify-content: center;">
        <div style="background: var(--bg-card); padding: 32px; border-radius: 20px; max-width: 800px; width: 95%; max-height: 90vh; overflow-y: auto; position: relative;">
          <button onclick="closeOrderModal()" style="position: absolute; top: 20px; right: 20px; font-size: 2rem; border: none; background: none; cursor: pointer; color: var(--text-muted);">&times;</button>
          
          <h2 id="modalOrderId" style="margin-bottom: 24px; font-family: 'Playfair Display', serif; font-size: 1.8rem;">Order #</h2>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px; margin-bottom: 32px;">
            <div>
              <h3 style="font-size: 1.1rem; margin-bottom: 12px; color: var(--primary);">Customer Details</h3>
              <p><strong>Name:</strong> <span id="modalCustomerName"></span></p>
              <p><strong>Email:</strong> <span id="modalCustomerEmail"></span></p>
              <p><strong>Phone:</strong> <span id="modalCustomerPhone"></span></p>
            </div>
            <div>
              <h3 style="font-size: 1.1rem; margin-bottom: 12px; color: var(--primary);">Shipping Address</h3>
              <p id="modalShippingAddress"></p>
              <p><span id="modalCity"></span>, <span id="modalState"></span></p>
            </div>
          </div>

          <div style="margin-bottom: 32px;">
            <h3 style="font-size: 1.1rem; margin-bottom: 12px; color: var(--primary);">Payment Info</h3>
            <p><strong>Payment Status:</strong> <span id="modalPaymentStatus" class="status-badge"></span></p>
            <p><strong>Solana Reference:</strong> <span id="modalReference" style="font-family: monospace; font-size: 0.8rem; word-break: break-all;"></span></p>
            <p><strong>Transaction Hash:</strong> <span id="modalSignature" style="font-family: monospace; font-size: 0.8rem; word-break: break-all;">N/A</span></p>
          </div>

          <h3 style="font-size: 1.1rem; margin-bottom: 12px; color: var(--primary);">Order Items</h3>
          <div class="table-container">
            <table style="width: 100%;">
              <thead>
                <tr>
                  <th>Product</th>
                  <th>Quantity</th>
                  <th>Price</th>
                  <th>Subtotal</th>
                </tr>
              </thead>
              <tbody id="modalItemsTable">
              </tbody>
              <tfoot>
                <tr>
                  <td colspan="3" style="text-align: right; font-weight: bold; padding: 12px;">Total:</td>
                  <td id="modalOrderTotal" style="font-weight: bold; padding: 12px;">₦0</td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>
      </div>

      <div class="dashboard-section" id="products-section">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">All Products</h2>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Product Name</th>
                  <th>Category</th>
                  <th>Price</th>
                  <th>Stock</th>
                </tr>
              </thead>
              <tbody id="productsTable">
                <!-- Data will be populated by API -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="dashboard-section" id="customers-section">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">All Customers</h2>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Customer Name</th>
                  <th>Email</th>
                  <th>Date Joined</th>
                </tr>
              </thead>
              <tbody id="customersTable">
                <!-- Data will be populated by API -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="dashboard-section" id="analytics-section"><div class="card"><div class="card-header"><h2 class="card-title">Analytics</h2></div><p style="padding: 20px; color: var(--text-muted);">Detailed analytics and reporting tools are coming soon to your dashboard.</p></div></div>
      <div class="dashboard-section" id="inventory-section"><div class="card"><div class="card-header"><h2 class="card-title">Inventory Management</h2></div><p style="padding: 20px; color: var(--text-muted);">Inventory tracking and low stock alerts will be available in the next update.</p></div></div>
      <div class="dashboard-section" id="reviews-section"><div class="card"><div class="card-header"><h2 class="card-title">Customer Reviews</h2></div><p style="padding: 20px; color: var(--text-muted);">Manage and respond to customer product reviews from this section.</p></div></div>
      <div class="dashboard-section" id="merchants-section">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Pending Approvals</h2>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Business Name</th>
                  <th>Email</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="pendingMerchantsTable">
                <!-- Data will be populated by API -->
              </tbody>
            </table>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h2 class="card-title">All Merchants</h2>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Business Name</th>
                  <th>Email</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="merchantsTable">
                <!-- Data will be populated by API -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="dashboard-section" id="settings-section"><div class="card"><div class="card-header"><h2 class="card-title">System Settings</h2></div><p style="padding: 20px; color: var(--text-muted);">Configure platform settings, roles, and permissions here.</p></div></div>
    </main>
  </div>

  <script>
    // Add cache-busting query parameter to scripts
    const scripts = [
      'public/js/api.js',
      'public/js/global-state.js',
      'public/js/api-client.js',
      'public/js/universal-theme.js',
      'public/js/admin-dashboard-functions.js'
    ];
    const version = new Date().getTime();
    scripts.forEach(script => {
      const scriptTag = document.createElement('script');
      scriptTag.src = `${script}?v=${version}`;
      document.body.appendChild(scriptTag);
    });
  </script>
</body>
</html>
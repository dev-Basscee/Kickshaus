<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Merchant Dashboard - Kickshaus</title>
  
  <link rel="stylesheet" href="public/css/style.css">
  <link rel="stylesheet" href="public/css/mobile-dark-mode.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Poppins', sans-serif; background: var(--bg-primary); color: var(--text-primary); }
    .dashboard-container { display: flex; min-height: 100vh; }
    
    /* Sidebar */
    .sidebar { width: 280px; background: var(--bg-card); border-right: 1px solid var(--border-color); padding: 24px 0; position: fixed; height: 100vh; overflow-y: auto; transition: all 0.3s ease; z-index: 100; }
    .sidebar-header { padding: 0 24px 24px; border-bottom: 1px solid var(--border-color); }
    .sidebar-logo { display: flex; align-items: center; gap: 12px; font-family: 'Playfair Display', serif; font-size: 1.5rem; font-weight: 900; color: var(--primary); }
    .sidebar-logo img { width: 40px; height: 40px; }
    .sidebar-nav { padding: 24px 0; }
    .nav-item { display: flex; align-items: center; gap: 12px; padding: 14px 24px; color: var(--text-secondary); text-decoration: none; transition: all 0.3s ease; cursor: pointer; border-left: 3px solid transparent; }
    .nav-item:hover { background: var(--bg-primary); color: var(--primary); border-left-color: var(--primary); }
    .nav-item.active { background: rgba(0, 168, 232, 0.1); color: var(--primary); border-left-color: var(--primary); font-weight: 600; }
    .nav-item i { width: 20px; font-size: 1.1rem; }
    .sidebar-footer { padding: 24px; border-top: 1px solid var(--border-color); margin-top: auto; }
    .logout-btn { display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 12px; background: var(--accent); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
    .logout-btn:hover { background: #ff5252; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3); }
    
    /* Main Content */
    .main-content { margin-left: 280px; flex: 1; padding: 32px; width: calc(100% - 280px); }
    .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px; flex-wrap: wrap; gap: 16px; }
    .page-title { font-family: 'Playfair Display', serif; font-size: 2.5rem; font-weight: 900; color: var(--text-primary); }
    .merchant-info { display: flex; align-items: center; gap: 12px; padding: 8px 16px; background: var(--bg-card); border-radius: 8px; border: 1px solid var(--border-color); }
    .merchant-avatar { width: 36px; height: 36px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 700; }
    
    /* Stats & Cards */
    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 24px; margin-bottom: 32px; }
    .stat-card { background: var(--bg-card); padding: 24px; border-radius: 16px; border: 1px solid var(--border-color); transition: all 0.3s ease; }
    .stat-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); }
    .stat-icon { width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin-bottom: 16px; }
    .stat-icon.blue { background: rgba(0, 168, 232, 0.1); color: var(--primary); }
    .stat-icon.green { background: rgba(76, 175, 80, 0.1); color: #4CAF50; }
    .stat-icon.orange { background: rgba(255, 152, 0, 0.1); color: #FF9800; }
    .stat-icon.purple { background: rgba(156, 39, 176, 0.1); color: #9C27B0; }
    .stat-value { font-size: 2rem; font-weight: 700; color: var(--text-primary); margin-bottom: 4px; }
    .stat-label { font-size: 0.9rem; color: var(--text-muted); }
    
    .card { background: var(--bg-card); border-radius: 16px; border: 1px solid var(--border-color); padding: 24px; margin-bottom: 24px; }
    .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .card-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); }
    
    /* Tables */
    .table-container { overflow-x: auto; }
    table { width: 100%; border-collapse: collapse; }
    th { text-align: left; padding: 12px; background: var(--bg-primary); color: var(--text-primary); font-weight: 600; font-size: 0.9rem; border-bottom: 2px solid var(--border-color); }
    td { padding: 16px 12px; border-bottom: 1px solid var(--border-color); color: var(--text-secondary); }
    tr:hover { background: var(--bg-primary); }
    .status-badge { display: inline-block; padding: 4px 12px; border-radius: 12px; font-size: 0.8rem; font-weight: 600; }
    .status-badge.pending_approval { background: rgba(255, 152, 0, 0.1); color: #FF9800; }
    .status-badge.live { background: rgba(76, 175, 80, 0.1); color: #4CAF50; }
    .status-badge.rejected { background: rgba(244, 67, 54, 0.1); color: #F44336; }
    
    /* Buttons */
    .btn { padding: 10px 20px; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 8px; font-family: 'Poppins', sans-serif; }
    .btn-primary { background: var(--primary); color: white; }
    .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 168, 232, 0.3); }
    .btn-secondary { background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border-color); }
    .btn-secondary:hover { background: var(--bg-card); border-color: var(--primary); }
    
    /* Forms */
    .form-group { margin-bottom: 20px; }
    .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-primary); }
    .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 12px; border: 2px solid var(--border-color); border-radius: 8px; background: var(--bg-primary); color: var(--text-primary); font-family: 'Poppins', sans-serif; }
    .form-group input:focus, .form-group textarea:focus, .form-group select:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 4px rgba(0, 168, 232, 0.1); }
    
    /* Mobile */
    .sidebar-toggle { display: none; position: fixed; top: 20px; left: 20px; z-index: 1001; background: var(--bg-card); border: none; padding: 12px; border-radius: 8px; box-shadow: var(--shadow-md); cursor: pointer; color: var(--text-primary); font-size: 1.3rem; }
    
    @media (max-width: 768px) {
      .sidebar-toggle { display: block; }
      .sidebar { left: -280px; }
      .sidebar.active { left: 0; box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3); }
      .main-content { margin-left: 0; width: 100%; padding: 80px 20px 20px; }
      .page-title { font-size: 2rem; }
      .stats-grid { grid-template-columns: 1fr; }
    }
    
    /* Sections */
    .dashboard-section { display: none; }
    .dashboard-section.active { display: block; animation: fadeInUp 0.5s ease; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body>

  <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme"><i class="fas fa-moon"></i></button>
  <button class="sidebar-toggle" id="sidebarToggle"><i class="fas fa-bars"></i></button>

  <div class="dashboard-container">
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%2300A8E8' d='M50 10 L80 30 L80 70 L50 90 L20 70 L20 30 Z'/%3E%3Cpath fill='white' d='M35 40 Q50 35 65 40 L65 60 Q50 65 35 60 Z'/%3E%3C/svg%3E" alt="Logo">
          <span>Merchant</span>
        </div>
      </div>
      <nav class="sidebar-nav">
        <a class="nav-item active" data-section="overview"><i class="fas fa-chart-line"></i><span>Overview</span></a>
        <a class="nav-item" data-section="add-product"><i class="fas fa-plus-circle"></i><span>Add Product</span></a>
        <a class="nav-item" data-section="my-products"><i class="fas fa-box"></i><span>My Products</span></a>
        <a class="nav-item" data-section="orders"><i class="fas fa-shopping-bag"></i><span>Orders</span></a>
      </nav>
      <div class="sidebar-footer">
        <button class="logout-btn" id="logoutBtn"><i class="fas fa-sign-out-alt"></i><span>Logout</span></button>
      </div>
    </aside>

    <main class="main-content">
      <div class="top-bar">
        <h1 class="page-title" id="pageTitle">Overview</h1>
        <div class="merchant-info">
          <div class="merchant-avatar" id="merchantAvatar">M</div>
          <div>
            <div style="font-size: 0.9rem; font-weight: 600;" id="merchantName">Merchant</div>
            <div style="font-size: 0.75rem; color: var(--text-muted);" id="merchantEmail">merchant@email.com</div>
          </div>
        </div>
      </div>

      <!-- OVERVIEW SECTION -->
      <div class="dashboard-section active" id="overview-section">
        <div class="stats-grid">
           <div class="stat-card">
            <div class="stat-icon blue"><i class="fas fa-box"></i></div>
            <div class="stat-value" id="totalProducts">0</div>
            <div class="stat-label">Total Products</div>
           </div>
        </div>
      </div>

      <!-- ADD PRODUCT SECTION -->
      <div class="dashboard-section" id="add-product-section">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Add New Product</h2>
          </div>
          <form id="addProductForm">
            <div class="form-group">
              <label for="pName">Product Name</label>
              <input type="text" id="pName" required placeholder="e.g. Nike Air Max">
            </div>
            <div class="form-group">
              <label for="pCategory">Category</label>
              <select id="pCategory" required>
                <option value="">Select Category</option>
                <option value="Running">Running</option>
                <option value="Formal">Formal</option>
                <option value="Casual">Casual</option>
                <option value="Lifestyle">Lifestyle</option>
              </select>
            </div>
            <div class="form-group">
              <label for="pPrice">Price (â‚¦)</label>
              <input type="number" id="pPrice" required min="1" placeholder="e.g. 50000">
            </div>
            <div class="form-group">
              <label for="pStock">Stock Quantity</label>
              <input type="number" id="pStock" required min="1" placeholder="e.g. 10">
            </div>
            <div class="form-group">
              <label for="pDesc">Description</label>
              <textarea id="pDesc" rows="4" placeholder="Product description..."></textarea>
            </div>
            <div class="form-group">
              <label for="pImage">Main Image URL</label>
              <input type="url" id="pImage" required placeholder="https://example.com/image.png">
              <p style="font-size: 0.8rem; color: var(--text-muted); margin-top: 5px;">(Use a direct image link)</p>
            </div>
            
            <button type="submit" class="btn btn-primary">Create Product</button>
          </form>
        </div>
      </div>

      <!-- MY PRODUCTS SECTION -->
      <div class="dashboard-section" id="my-products-section">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">My Products</h2>
            <button class="btn btn-primary" onclick="document.querySelector('[data-section=\'add-product\']').click()">+ Add New</button>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Product</th>
                  <th>Price</th>
                  <th>Stock</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="productsTable">
                <!-- Loaded by JS -->
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- ORDERS SECTION -->
      <div class="dashboard-section" id="orders-section">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Orders for My Products</h2>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Order ID</th>
                  <th>Customer</th>
                  <th>Items Bought</th>
                  <th>Total Amount</th>
                  <th>Status</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody id="merchantOrdersTable">
                <!-- Loaded by JS -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="public/js/api.js"></script>
  <script src="public/js/global-state.js"></script>
  <script src="public/js/api-client.js"></script>
  <script src="public/js/universal-theme.js"></script>
  <script src="public/js/merchant-dashboard-functions.js"></script>
</body>
</html>